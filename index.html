<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script src="Mochi.js" type="text/javascript"></script>
    <script src="util.js" type="text/javascript"></script>
    <script src="tokenizejavascript.js" type="text/javascript"></script>
    <script src="parsejavascript.js" type="text/javascript"></script>
    <script src="stringstream.js" type="text/javascript"></script>
    <script src="select.js" type="text/javascript"></script>
    <script src="codemirror.js" type="text/javascript"></script>
    <title>CodeMirror: In-browser code editing</title>
  </head>
  <body style="padding: 20px;">

<div style="border: 1px solid black; padding: 3px;">
<textarea id="code" cols="120" rows="30">
var CodeMirror = {
  use: "a JavaScript code-editor",
  license: "BSD-like",
  dependencies: [MochiKit],

  features: [
    "syntax colouring",
    "different colouring of local variables",
    "automatic indentation",
    "incremental parsing" // awesome efficiency hack
  ],

  keyBindings: {
    enter: "newline-and-indent",
    tab: "reindent-current-line",
    ctrl_alt_a: "reparse-buffer" // Or use ctrl-tab if your browser
  }                              // messes with that.
};

function getCodeMirror(easy) {
  if (easy)
    download("http://marijn.haverbeke.nl/codemirror/codemirror.zip");
  else
    shell.run("darcs get http://marijn.haverbeke.nl/codemirror/");
  // Darcs (a code versioning system) can be found at http://darcs.net
}

function browserSupported(browser, version) {
  return (browser == "Firefox" && version >= 1.5) ||
         (browser == "Internet Explorer" && version >= 6) ||
         (browser == "Safari" && version >= 3) ||
         (browser == "Opera" && version >= 9.5);
}
</textarea>
</div>
<div>
  <div style="float: left; padding-right: 10px;"><img src="people.jpg" alt=""/></div>
  <div style="font-family: tahoma, arial, sans-serif; padding-left: 190px;">

  <p>The above block of code introduces and demonstrates CodeMirror,
  my attempt to write a practical in-browser code editor. It works
  rather well, though there are probably some combinations of
  browsers, platforms, and situations that cause it to break
  completely. The editor is currently being used in an <a
  href="http://eloquentjavascript.net">interactive book</a> on
  JavaScript, and a fork of it is being used in the <a
  href="http://typo3.org">TYPO3</a> project.</p>

  <p>CodeMirror comes with a JavaScript parser and an <a
  href="htmltest.html">XML/HTML</a> parser, allowing it to highlight
  and indent code in those languages, but other parsers can be plugged
  into it. If you want clever indentation (or some kind of static code
  analysis), writing support for a new language is non-trivial. Rules
  for simple colouring should be easy to add. <em>If</em> anyone ends
  up writing another good parser for some language, I'd be happy to
  hear about it and maybe include it in my distribution of the
  editor.</p>

  <p>Due to limitations of browsers (and my taste for weird hacks) the
  implementation of CodeMirror is rather complicated. <a
  href="story.html">Here</a> is a rather long document with some notes
  about its internals. For simple use, the <a
  href="manual.html">manual</a> should explain everything, and for
  detailed information about the code, you can try looking at the
  comments and the <a
  href="http://marijn.haverbeke.nl/darcsweb.cgi?r=CodeMirror">change
  log</a>. Any remarks, bug reports, and fan/hate mail can be sent to
  <a href="mailto:marijnh@gmail.com">marijnh@gmail.com</a>.</p>

  </div>
</div>

<script type="text/javascript">
  var editor = new CodeMirror(partial(swapDOM, $('code')), {height: "350px", content: $('code').value});
</script>
  </body>
</html>
