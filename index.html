<html>
  <head>
    <script src="MochiKit/Base.js" type="text/javascript"></script>
    <script src="MochiKit/DOM.js" type="text/javascript"></script>
    <script src="MochiKit/Style.js" type="text/javascript"></script>
    <script src="MochiKit/Signal.js" type="text/javascript"></script>
    <script src="MochiKit/Iter.js" type="text/javascript"></script>
    <script src="util.js" type="text/javascript"></script>
    <script src="select.js" type="text/javascript"></script>
    <script src="tokenize.js" type="text/javascript"></script>
    <script src="highlight.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="highlight.css"/>
    <title>Javascript syntax highlighting</title>
  </head>
  <body>

<textarea id="foo" cols="120" rows="30">
function (x, y) {
  var z = x + y;
  return z * z;
}

function (x, y) {
  var z = x + y;
  return z * z;
}
</textarea>
<p><button id="buttonA">Highlight text</button> <button id="buttonB">get selected</button></p>

    <script type="text/javascript">
      addHighlighting("foo");
      var sel = null;
      connect("buttonA", "onclick", function(){highlight($("foo").contentWindow.document.body);});
      connect("buttonB", "onclick", function(){if (sel) {sel.select(); sel = null;} else {sel = rangeFromSelection($('foo').contentWindow);}});
      var fr = $('foo').contentWindow;
    </script>
  </body>
</html>