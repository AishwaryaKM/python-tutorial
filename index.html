<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script src="Mochi.js" type="text/javascript"></script>
    <script src="util.js" type="text/javascript"></script>
    <script src="select.js" type="text/javascript"></script>
    <script src="tokenize.js" type="text/javascript"></script>
    <script src="highlight.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="highlight.css"/>
    <title>Javascript syntax highlighting</title>
  </head>
  <body style="padding: 20px;">

<div style="border: 1px solid black; padding: 3px;">
<textarea id="foo" cols="120" rows="30">
if (2 > 3) {
  alert("Impossible!");
} else {
  alert("The universe is in order.");
}

var firstName = {miller: "Henry",
                 thompson: "Hunter",
                 nietzsche: "Friedrich"};

"5 onions and 6 potatoes".replace(/\d/g, function(x){
  return parseInt(x) + 1;
});

function copyArray(array) {
  var newArr = new Array(array.length);
  for (var i = 0; i != array.length; i++)
    newArr[i] = array[i];

  return newArr;
}
</textarea>
</div>
<div>
  <div style="float: left; padding-right: 10px;"><img src="people.jpg" alt="nonsense"/></div>
  <div style="font-family: tahoma, arial, sans-serif; padding-left: 190px;">
  <p>The above block of code demonstrates an in-browser,
  syntax-highlighting, auto-indenting JavaScript editor. Use ctrl-i or
  ctrl-space (depending on which one your browser interferes with) to
  re-indent the current line. Known issues are...</p>

  <ul>
    <li>Opera has a bug which makes it impossible to get proper
    information about the cursor position when it is not inside a text
    node. This causes the editor to screw up when you press enter. (If
    you happen to know of a workaround for this, tell me!)</li>
    <li>I have not been able to properly test this on Safari yet, but
    have been told it does not work. This will be looked into as soon
    as I manage to get access to a Safari browser.</li>
  </ul>

  <p>Eventually, this editor will be integrated into a kind of
  mini-IDE which is part of an online book about JavaScript, and when
  I get around to it there will also be a stand-alone JS development
  environment thingy.</p>

  <p>The JavaScript code used by this page (except for <a
  href="http://www.mochikit.com">MochiKit</a>, which is not mine) is
  released under a <a href="LICENSE">BSD-like license</a>, if you
  think you can figure it out (documentation will come later,
  seriously) you can use it for your own purposes. A <a
  href="http://www.abridgegame.org/darcs/">darcs</a> repository can be
  checked out out with:</p>

  <pre style="padding-left: 1em;">darcs get http://marijn.haverbeke.nl/highlight</pre>

  <p><a href="story.html">Here</a> is a document with some notes about
  the implementation. Comments, bugs, and ridicule can be sent to
  mar&#x69;jnh&#x40;gmail.com.</p>
  </div>
</div>

<script type="text/javascript">
  var js = new JSEditor(partial(swapDOM, $('foo')), 900, 350, $('foo').value);
</script>
  </body>
</html>
